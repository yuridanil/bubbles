<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100%;
        }

        .circle {
            position: absolute;
            left: 100px;
            top: 100px;
            border-radius: 50%;
            background-color: aqua;
            pointer-events: none;
            aspect-ratio: 1 / 1;
        }

        svg {
            width: 100%;
            height: 100vh;
            opacity: 1;
            cursor: none;
        }
    </style>

    <script>
        let start = new Date();
        let size = 24;
        let canvas;
        let ctx;
        let n = 0;
        let
            W,
            H,
            BUBBLE_CNT = 1,
            WAVE_CNT = 1,
            DEFAULT_SIZE = 32,
            SPEED = 90,
            MIN_RADIUS = 1,
            MAX_RADIUS = 13;
        let bubbles = [];
        let waves = [];
        let svg, circle;
        let img = new Image();

        const animateBubbles = () => {
            n++;
            svg.querySelectorAll("#bubbles > circle").forEach((e, i) => {
                let cx = parseFloat(e.getAttribute("cx")),
                    cy = parseFloat(e.getAttribute("cy")),
                    dx = parseFloat(e.getAttribute("dx")),
                    r = parseFloat(e.getAttribute("r"));
                if (Math.random() < 0.01) dx = - dx;
                cx = cx + ((- 1 + 2 * Math.random()) + dx / 3) * r / 12;
                cy = cy - 5 * r / 12 * SPEED / 100;
                if (cy < -r || cx < -r || cx > W + r) {
                    cy = H;
                    cx = Math.floor(W * Math.random());
                }
                e.setAttribute("cx", cx);
                e.setAttribute("cy", cy);
                e.setAttribute("dx", dx);

            });
            window.requestAnimationFrame(animateBubbles);
        }


        const createBubble = (x, y, r) => {
            let bubble = document.createElementNS(svg.namespaceURI, 'circle');
            bubble.setAttribute("cx", x);
            bubble.setAttribute("cy", y);
            bubble.setAttribute("dx", Math.random() > 0.5 ? -1 : 1);
            bubble.setAttribute("r", r);
            bubble.setAttribute("fill", "#ffffff");
            bubble.setAttribute("style", "opacity:0.5; filter:drop-shadow(4px 6px 1px #ff664488) drop-shadow(-2px -4px 1px #44ffffff) blur(2px)");
            svg.querySelector("#bubbles").appendChild(bubble);
        }

        const initSvg = () => {
            for (let i = 0; i < BUBBLE_CNT; i++) {
                let bubble = document.createElementNS(svg.namespaceURI, 'circle');
                createBubble(
                    Math.floor(W * Math.random()),
                    Math.floor(H * Math.random()),
                    MIN_RADIUS + (Math.random() * (MAX_RADIUS - MIN_RADIUS))
                );
            }
        }

        const resizeSvg = () => {
            W = document.body.clientWidth;
            H = document.body.clientHeight;
            svg.setAttribute("width", W);
            svg.setAttribute("height", H);
        }

        const handleClick = (e) => {
            createBubble(e.clientX, e.clientY, parseInt(circle.style.width) / 2);
        }

        window.onresize = () => {
            resizeSvg();
        }
        window.onmousemove = (e) => {
            circle.style.left = e.clientX - parseInt(circle.style.width) / 2 + "px";
            circle.style.top = e.clientY - parseInt(circle.style.width) / 2 + "px";
        }

        window.onwheel = (e) => {
            let r = parseInt(circle.style.width);
            if (e.deltaY < 0 && r < 50)
                r++;
            else if (e.deltaY > 0 && r > 2)
                r--;
            circle.style.width = r + "px";
            // circle.style.height = circle.style.width;
        }

        window.onload = () => {
            svg = document.getElementById("svg");
            svg.onclick = handleClick;
            circle = document.querySelector("#circle");
            circle.style.width = "10px";
            // circle.style.height = "10px";
            resizeSvg();
            initSvg();
            window.requestAnimationFrame(animateBubbles);
        }
    </script>
</head>

<body>
    <div id="circle" class="circle"></div>
    <svg id="svg" class="svg">
        <defs>
            <linearGradient id="seaGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" stop-color="#00aacc" />
                <stop offset="100%" stop-color="#003040" />
            </linearGradient>
        </defs>
        <rect x="0" y="0" width="100%" height="100%" fill="url(#seaGradient)" />
        <g id="waves"></g>
        <g id="bubbles"></g>
    </svg>

</body>

</html>